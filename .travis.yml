# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: JVY8AcQFdYWRuNVAqMkDcfb2R9E0kVuSBm+Rsx6W1JKimz07RESfIcIy6KWn3r9ByuuF11BbyzpL1k8dD6iVl9yc7DdDXBHRjhMpDV5va2uqaQTzocvs0yqdlnaT2cXShhJN3vTk6XeNzOZKXX0lnhI542ouWRPxkzEcGtvGrjHoCNd+6tXIwiziuL0Z89RiGvIO3CP+B+NSkfW/plHll2TOqNQjevHe7UBYYbYgrR8lD+sNpqxHc1NtXvEvUF2mP8ej1FXKh8vfDtmqxdw0JKhEY8hvx6oNFbYXLKepDcoiIMBnIk6wOTyU6amkN4hsqtfhm3wIEy8xgJItMXzjyYFZMBsWWwNZV/m2X3IEGonz3VJbRSoab2vD9kts71u4bFLU7ESWJk2c9Qr40iBODZje6Mpc3FvOxnYH5XL5eP9Kc37RHp7CNN41JL0hn473cQHAFeVvkW76kJO3cQV++F3JvZQ8C3uWLFyZ2O/HHHeATTNnpkqYWLTYCekOtlascz0NuiWf86ELNvqS9Jle8a0j5gSmf8r+CoXH6Am875GnCI7v1KQdjNMZsa2dK65oYVVSroM/t9PVLSE71oeiCWqZ+6KlYdc9SVRcu55sHul9P/yoSLXGjfPQob+IAm71tgMtpdj+Afp/jtuasdcAw6CdZubjqUL6+YMajdRytf8=
  - secure: IH+HZWslRG+AJ9u6vjEI+1eLRAuClRd7iKJoSVZfCBuv7VsjT1wvFJBS0LoywRtY3olMTZJH0YVC6UP0IGSwjRGPl89JDXTmSNm46IYXl4L5i7Dm6FPjGaRphTPqCThJ9ro2My5lJf/PlDQTspBSE/rbwUmyo8DKQj0HHpl4buP+bYN8uDJx4OfL1zGhz7c9zQIiUmpEnJ47OQA/BoR8ltEszRBJ68EEZjhT3IqTIYn7IbSjN0ThhXd4KEsknwv086VeKaKjcthgsa5D6QaUAHRwMjjDG9GkXR73LHphk1+9w9N8gA3FBoW2rxhNfgjsz5McYC44/m6vTGyCC5NDo8AqJ6ex1hoc+kSDDr2nJ2mhEBsZKsogYAQ024XKV4NKfZHxPdYw06qR1P/IQF7Mk5VKkcywMY7jFw6KRXxFyOoLml5Ouhb+SzKjkzHaAA1BlS02dWf3Stp4L4r+jYurbjVc51l4a2gUT4HTz2EebmVNJ+RvjPSg1suORHiONZZqDOQ9NNGsMeoB+oDpgNjl/8JGe0h9IV1M3bajWgqTOciLdvHY6eoPMhIyDK5YlZLl4d4gvYtXXFFUYNYkpUN8Mu39cSE/PKaRFSeBkiDkGl23BrHcgTVZmTiYl5LN0sg4t3UmFse5r8X1baatY33S5JunKO7HiiZo7W9b/6KjG/o=
  - secure: B7LfXiAky9XqDRSZpcUVeKZ4RZkTnzqDgzA/OcDk/RxUnuojrIFWVmANbRK39AeAgMfKZ+9cnOzzfekrY0O3kU/QBuNjlxI/2YS9PaI3NRy7a/N6xgRydLe/VNXKyN+xU30ClDc+CtiUFwoN3x1ksyNjgFKkIlSmYVyeBEY+dZoXqCnsDIGNfadgu5Ji8x6rsFvUbkllsvyxL41mQsoMulRuq9FtsnqwMYCiiMUO6W64vQXH6CHcysZ3h5XDsC0CzT1UdUYSpOpHcNCGlGGExAwCM6GpOwHEn+eD1HuoRtPDO2LMddzGtYfOZjmNIlIzwbb1AwrhRu6NtcTFnF3HKVeWnMOUAwkmhUOBps6oJxoEqd3l7veG8WnnrV/wbWD/xs4ZnaVJfN+n31bvbZhdRlvscsTwQqsiLkeIK89gk9PqHrpV0ednEj7Mq79hyY7MSaD7PbhsSS9p5ogn6a+lGMab0B+Mna94W6n+NIAIjz/Ai2om3iRqZ1q12toKQf5h/m++u/4jKdww9O5K2j3j0NqeoIsTkmFwZ0VQccT6S3TH1rCtS4qvPhl7ev9nnT3PisiQxcFJcLCkDACVdt+fOqAWvEeEwkLYHYWTEayrmD7dbtwro0eaHCR5f9Lmp9sOmvT76jdQZPaHn4ent9hZnzllCbTCdMi6sID0MKK9pWg=
  - secure: Pfr2nHlmQQwcQtkpMOWPgF+lGsBDFekGnuWJEXcSjnq7RFkdFTuQ0NGl5RWQGxEm3ZnfzGWDoRFaRFP9/VauuGKlB/gYYHErkKvwbgmxRX7+1px/kmkc4FkyzZOnD8oE07ZapNv0YlHLyAWl1Unc82dGHfU4suiNpyyF/TEYbi88msgskf2DvntD7nE+Q9VLvFSKnsGGAJexCtwTcrqlqf1UhjBAR+9/epw45AVJ4omgbdKMmJ11uXE3otV5iqpIIhRMwPFJ2xrF3z7LEqBBmx8GRuEum9WiOSe5TFZpa7kKUiXOCs2V0xYdWpON4YqDRrxHfqY6odoG/sjhkqoPFUPR0g0glqaOzMK2Y3ZaBiAvSKwdK38yHrrQw6S3NYbH6cmpGwR2+BOPISKQ0/slG5rfK0BzINVbKvktWWTf7tGfBcGVe3VGpvYNt9HcP+KGhSHKKZIhBKpRvOGcA+pfG80EDr2DwxsVV2L8/RetmWMFQovqTpU90ETfOc1Ed4EJndmIJ9O3QBhTEMkKn8Q8tRj3Xu0zOgS2cBUhvtWm0XIVK9bXLY7l55J4V2meOsGKh+uoC3RpMLZ6vJfdUYbxdJreqLd+lh9vjGRfYV187Pw+j2DhPTtfFplq8bK7gcSg9K/atvYNgzmITMRd3x5W4icvQ9YLRH9eAgkydfJ2igk=
  - secure: BOtGLislJ8NrWHZpOCnDYZpJ6L/JWy3e/SP9iARY3Iqj7r1cBeTrDSXpVGK0RPI+UFWK+At+8SCSN7IM4Wv+7dDPonsL+1i1SIWwn2glHPKthl371ousMvNyPQ+n1Nm2pQ3D+jndRzCb9/dH/AuuyAl+Tgh7bYSc6r0ixXodV42SSHfLNZxws2e8oLzhUTBcIIgt1OQ4if8vwXVqEKfd9cCGnl+ZTjoX3oEuVK5pRcrcy9OIdAiQiTQ0n7jGpfSrTqVIsA8CuOI2+0mCe7N0fd2f+G93ldkzQ5rp3Ax4bKfRAVd8tIEjglfdZ00XKupQO9xGxW8LCsjeT+srl6VtplmuJjUvFVdTWjsd5zF2zvFc36M+mw8Hg1Ni3nBbtdqv0gimujzFFBuYNnAJmq2Uu1BULKBPvLtxdhNQdOzyuBE7WWOXgOrIkgoRW4iwyZBsrkg2U2Zd3jBy0ioYaO82N1tjJl8evOO4xbJzoqtNFCvFUH0b7hxXNzPjzF6iitlfjnXbfWpR8m6aZWRLb+kUO3hk8noudFdrfySeB5TKht+7pryjnqaTXNALUpAUswVbT2egFZhCRl73wrOU5WbzFgf5ANQm7Cr35hGVNq0ulg80hOPZ2YZkrl1zql1zC1amEgmQGzwFEdk/r9KKozJ3EI1nUxcxGqIhY75wMjzjukM=
  - secure: JG7/Zhfwa22i/i9tyEG8esIi0ZFIW0t8gIvq5ikxEKBmWJhqZDZqhaawki3cKd+uRh5m0XhqBqY3q8Oiws4P59VUf9gfd/H1YoQB1wDBZkxoaXfAt3t756Pr+cSCpvtlf6ShCBY4dWEFbs7NldiBAlvfYsTdlqvajwrULi4k2yatnJky7SLGUT9iP9kh5GkEAAJdMri5pi6I9QBcbSZjOFsNTG/mJxnuOT+lgT9clIUThNGvcOjS73C0VFQRIT1YTug+uwrpngi7pkEDNBsbl5wUSRy6JrMmjU7SNgP0Gghx6IvHD20oNgQXoWqoeCcW1Y54jKvfLX1yuKf4SOZ7tD5y1oUhahb9DbPVPkukB/gp0el5VKlMDgq9/VGnIbjqBKMADFdQ0d15pwSGncAMj2FTcO4yEh2Lto8MEMflqGPIREDrzyo0az3Y0fkAPpFiQBFGabaoTK/nrlY6tAVie0jBT+fJXZ8GvlvpAyra+3UwyQQ3HgcHclrccHN/84bckd+J5hBl0UjGDnngveScItYGyyeMPXUk+zXn1s0j20k1QOFc1TZ0zEGJN2jsWVRMZRgmNjKWlNo8mqF6zh51btEFv1pJ1B8OXdsW7B+wzJn4OO+BvDseCtmd+2NpK5mcrcOtdpWBpZMzq5rl/6oYHLQetk8y5kU1amXg62+N7kU=
  - secure: E4thoIwuu/7WrXZcTLxTNJuTiETYis396MKBea6B+zaTwbUxEsh4jbPAx3+pz/p6U0/gAhMDV91+kAQiI//KMEDUmI6HsVUMAJ+sAtea1NUTIgnYRKcL/GOPZTuAGB02p5xi9aZXCn4LAzMhE6FvETcT+zVFY72cSyKx400CjyP4ZjwyA0jPgkV+YrhVJ1JPMi/AlcAt2JdD9Qws82Rv4kbrQf22XpICZIxKqGPsSMLdroJiZJfn3UXQe76QRyxHVqkLjLo2P6Cg04hi6UNpIbUugOb2SfW0Rb7lNhmZ4crDjYkGLrr1Kj8nbmP8C4WiHUItzyX0PBD/ddt4Uj8fodRES9/zx0X63+MOjYFn5SwbtCS7rpqf9068sHhmDBjVxz+05g1dC/+dfBzyT/Qd1DCIskxTpVLrB/PFbsbhCjOkSMgTzvdXm9VpAx6QKP0esr1Wa71L2zq0qRMupvb45F7UjCmUILBZ+56/dURsw0Z+48/5lU5DkGTVN57X76/9h+08X3zjTx2iPB3Rtg2V4aBA/0vVVwy1BJiS6pAaPx0CC45Mp4IHL+6Me07vtxKSq12IPY0a0gGHWGzBON/GM30yJu2ey93xmePjxjanUYEVPQ7no/SFsQ8jQpc00LOpIHcWujST4aMjokrqJQeiSxykJAnR2ravIvs50fPbuYg=
