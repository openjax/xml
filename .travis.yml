# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

dist: trusty
language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax && find ~/.m2/repository -name '*SNAPSHOT*' -type d -exec rm -rf '{}' \; || true
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: odzHK5PTBt9k/6mIiMtP2zNyxLp4MROM/ZN/gXUfX6uShIhhIj1LP2D+tN7qygimNGnOR4aLigiVducWBk6if08xuTpZeE+2nEpUoiWnjNkL9wV2TZhIJ/QqBZfBzs3ZngUtVqTj9wq1iOZoG01se88YgkDYR0pE/7fQefp0dWdToBcunDX6LsBjadQ5ecR8wNJByOpBI6WlRqmiVhf+LUlOZz9jtZAyms5J/5G2rcrbUTBBGOtjEuvmfQm4U5ncv9xKaYTKKpYVNaZEKPKLc/cGWtf7YSSQkF2JC0zWTyWJbzNKaS9ARPUdX2YwvI10JDgYQ6ju1tYmGAfGPwMmUpJ7/HJMRSnilarXbycde479AUhRpXsww9PsOQZBln5YPniphLMJbG/MfDaHqYgpGZa5odnytdIMOTyur7mSUQlSRvQJ99kQ6oN3+Lb83z7aGXD6bxhWvCXI7Uv985Pbg7Ca/dKMy5UDEh+XDoa3TxFb986cCB7F58toumuL6VUuQR++R/EailmrBUGxUS3TsxuHA4XDsXI9vjFlUPasVNrYsfYXylJXPG1A+UXynR5LZgdIPC9HaxTdRP1NLgvgb95lxvB0zRYM/Czwkm6jGXPsQ0+gk1pChp6l0NeXWbKL0YvBlK2cNnfnMiJ56RhzwMwLFV1lN8aWQP50gDzFcmg=
  - secure: sfUd+xqdpvZwnL8ot4iy8ZfsJKqB5gBgNvDD/1k5qk7X9cjZhw+RaoiTJSI+v8+uiLE9gCah1co/nKS1XOLB44e0zkxb/dP9zXOMbiUPkjkqPjkVEI2HIqkusspZ6FJy25IZKDTVRffI7GPwvW0WkpzR/BEtWmF7JJ4+qmKii5aLaNBqtW5CWoOfTnPpSNrGL5kInhlOKqA7+GSNkEvkxcuhdc5VZvSaMdgTo4XODKeVDej8RfVo3QcZFYFQbpOk8i/PNaARiV3TnHNBYEbtfQJFlqnegvgw/24wlzOH0SpGmAJ01qSgmaAy6Uo8tU/ciixZ5tGL8fmQ4QgYNik4Ms4tQc46uOWyiAmDSDjpfA0jo4ZxOmJzH5w4dc+/1Fr1Dr7fVf6sYra598IvU/UjbXkk41zfV17lW8j8Kj+ZDLtnvCdUF7FtmlruHL3/lWWgrBsXa6UZHFjE2McGoM+Va6YMjNaEAJcjXFMvQJSKmbIHOpoPCz6NrvHxZwegPp9WM5owoK8p30auTCAb4oYO7t05T/CWEk6CJpX7FtbI9Gyg12JsHxcvPOCZ/Vjw3hAk+Z/lGPMC0y9i5ELspO0rNjTNfXraB/iuB06PfIcHMUVpF9cyAsPK87S4UiU6Veq2G6KMA8B12xrCgFszETqDhZBUOgFL5pfznQIiKk0pPB0=
  - secure: x1mqxR/L3VtofXYLHG8/seJ9OVIQ/RhEc216de3rR4C5zadAuWDfmsmYhQn+ETSKLQO/3hJcqlX1mESBmuAY7MnSArpvZQ5+e6P8kd8zxTPBVHwUxeaEBcpXrOqQk7dt+Basvb+Nq0OZpZZyXrzvG9Gn98HsW4Dvd91J/Jw5DU/ltQWJ9XxL9jkSsmybEaYjUu++cXICNu+MYW72rDJuEeGjLEovJkuUBzyZrMvEIzGCr58bK27S/J4ngQKUl+JIIfNoemeYR56lEnyMF+fqFf9KwcF3SgZPA8LTGNqPLg3EBVNkGeVNN3zCoL7OCFadAvDvX1P/K2fD5OXInldLLWJ5ItMHGYKs0aHenEug0uaNDdcZRQOSf22EZ6t5SkXog8wA07aWH3WiBGJ57sUX5QEp7w0y9+wKyndtKgRa5bAJUTKbd38ZYUd3BDFYLjxQgEZayoBJcyjG8Rbx6I3vAgkXElaAFHo2HLCkWkWXX31qhC/W5lc5ItkEEKEfk1/ZhG8sNEhBdPSXRbzglITYg+WBceb8P5L4AKcnZrs8uZ8lvsTfZ6+69NzrYhcXtEGr3a7A1lwJldfvB14Nrhb/2iqBFlC9h7QR9XYlNLPSmo1Xo3jvY2m+ebQ3D3/EP6X4joPbFFNz3jeFvO25jR4tXdoPbqoghNNCMpVj5SWKnXE=
  - secure: ANP8/zQ+wO7dT28eEwD/bOTJAQtBL9+qc3kl6kEBnpXviXX0KawR6PgHw2PDMHzAL1fuzAV+rPxe95kou1AueuFeX5h3EJozWX33h9NdWab8j4hfDT5lOV/bASt1CI/T61i3Xukv3S5BMrxZnYj+j818Bv0kxFEh/i//bFqZ0hyHqJ7MGJVw/ChxLoIlFBKlvwmI98VKLfyOr7E2qZOSwG7NZGlon975qZ3ZPs1u7H+6ZyEeZHANsKo2TSp2MfrZVP/ecOI4I+yR5gZ7w69gw5fq+veW4XZZe+PQDHvTlJ36M7LAgDLnZZlON5rHQ6OyzBY9IMKHPYf8SBeU9MJsHaUUHRpCqK19D/lT2hADdwZjMD/xI09rjezaYhJByLw4Ddv+cXswsk6L/V5oQE86Q0oTyx/ZN49iTZdmeQSG7mqhs5fk3fWQCJWRzHBDCw7DciJgR2t1Dqw5TthyEC6w7m2j64l1AFVpLjA/J+s4suuwGOLPeS6uP6p30l5FjZyWa6WJAP18mIOyQ9N5+x4jTyIoh1vyEylyvV2XKyYBStE2xRS7cCKa9EuRJ4gSDqTljkXWk+EsdjJFjBgPCfRTTy9XwhgltpPo+9W0MXFm46IgIu329rdevZPNjQ2UjeAFUObyuPyCAkljwdJnaj6OmhR6UuR58Tsd9smkaBHhZHQ=
  - secure: OLhu/eS/lCEIv0SlZQ7DIOzjbq0qId5ZC4yVcMj4Zx07GxUFZU6Wq4NkFpBO6zjMBewcUpw63AZZVQmeYJHJb/VwC0j0OFAAtz27mfd/pJK6LhzNhTaNVveRbMX3LRoD7apiB7Jw3c7xyHwYdMMpEYJcB++v7Yk9YUx+qCCTIsPf3cR7mqPAlsc3jqK4fClfzZNgHoE5uuskw3zqGlv57fOfv+gt5YaoxFh7G/7iMYXsOqmBTWw9+9DEbB1a7hQrA+ZvFMVmboNDv9WV2pLsS6CYXpzRaRacMeXkAry6FAA0kGAN8NvlaLCdSoSTzxNXKWx0ZZ7gF51yy0N36OXUkneionbiU/UWuUub7wi0A5dkzdBYCLxGFC5yh9Ye1+9Yq0MyjjSvtupiR8xozjgMf+I9Udif+HjMvFOWRrTjF3BXxgCBsZPrKyKLoMsZ7mFLy/Jf+sdFhShiGRKV21/xvORMjMxbeE5j8CNrHHvDpvQaPOmGpQA12Y27Phs4Th7Vt1UsJ+HTv/MF7VO5km0HMCxLqlWLXWqEkz7obc4w8xtFvPourd6R6Y9wLsFbo8c/IlXTJa4l2KyY/yotUA/AiPPOyKNxoP1TIW7CQPdpwKvwlcIXNBLZ3y539NqSwH923QOKpy+B9N2C1tRZbwcnivmCcagv+/vS7pLrw2CoZpg=
  - secure: cnWQmZ47PLyovVh+sG5ayLZrfqG8iAW58WaFFE1COyS6J/TwJUL+5ne0bRd7Cl58OyCDnwd15htPxpoBeKkTngw23jz+uzD5gvhh6NBYr286HgOJgW+U1F2iDSuxmQA3i2ohpdz7qZdkIFntPl+wqVWFggIsIb6FJ+Xpl1J5SvNk2TI6YjhR/4gYf+LssaqELhXRFFNolI4w+TSxORKZ14kY3TD9gN40vKHib/jajjcqalItpikWRSlL3VgDAGG8WKp3FFP/S7YNO/wLSYHr33+RwVx0KLZuGc/Lu27F3QzFXc80S5KM1aWYBY6FMGusNXs+IAiUTLwe5tiRRII9+Q6qw7l2lmgTIHLa8svSMv1uSWu7np3bs3qYqT9ChinYxqGwsf15728rC0zdvI5/LKd5WVkKzEd7S+Bc3YbXjSrNgidiITvcsWI2S25hunvfnYzyYnaziHf7yrcvggLjLuUWu2MNJk7q5QFjpTE7eBqB7kjjS/MCMdPOM/ZyGBnjX0VlWHNuv8TZR9cQaUT0NXvjQRXPJELGTBsdem3KU06YRZxyvcS7PXdT0MjsXZdTFYOWO4QxUbA4np9HZY5WPmNc8tZyeAPx4+YgOY9iLVDfglBG8gABoSxJhKsIKI2psRsJ9PuXp8jOmbYLLGYVaWCbrEyyf9sactzidbtzZSk=
  - secure: QNT+g18ggKtZOdMbSLuT8jiWJeYiAoTv2G8xwdN0WbaGDk/Tjs5UjbacnjRUPiMWpHO5u2lRch0mGoKi5HvAXd29grfbOnnKIWg0Zeh/5dKMDQawJ98hYOpLtya1tDiGZ3MKnMHbcFyA9jd99fhFtzRDOGuyPaWUWFkRjWXFIQHcVYdNzC9ADZ6Zv4fJVBNx3t+Hp1UYHRP+A1LpkhBIq62n7utvklzU7HqHxHqFuLv0WurJhxWYmxokuiJD074biZVxS6Uq+KL1zugaq+kRYep7HHd86aAoWAiCZIw1ZTnpanznxpeOS/AImG1Y8jHg3FK1b5yQDltyWs+gMJ+FsPLvUl2sD2IgY/bcWMZEiRswLTppaOl8CilBpNtQDRFOaPHKUM3m2w+JsE7Y+b+CDIcOnK80EYAIy+8brxaf2iiC/bEuQx0FgMmX9/nAhFo2meXWZVt9qlJdVcYPiplgfhgqBYI/lzVHSu3+8XQEJMeJ4hwZpCvqkfhIvqogII75y90BX6+8Vr8uztkOCkHP+pRjVcBA4DY8Uo0vpjkqMtTqAfE/QyplIl6AAp/zJCjLdl67OBIpiu7fdDKBHY5FuDYTGAPUWUqCIhWpI6WwfELA+Grhh9zCDuecmLMoB/PPWHzPBwHJNp+8pTCI2Q4O5ROQHGffKKyqpffhiIPVAk8=
